在做Lab过程中犯的错误如下：

1.每一个服务器最多会对一个任期号投出一张票(直到Lab2C才发现自己一直写错了)，votedFor不能随便重置为-1，只有在Term增加时才能重置为-1。比如一下情况：p[0] [1] p[2] 三个raft节点，

p[0] 在t1为leader，追加日志(Term:1,Cmd:5,Index:1)，持久化之后，发送给p[0]p[1]两个节点，成功并提交，然后p[0]掉线。

p[1]在t2选举为leader，然后追加日志(Term:2,Cmd:4,Index:2)，持久化还没发送给p[2]就掉线了。

p[0]重新上线，初始化term为1，如果没有上面的一个term只能投出一张票，则p[0]可以在t2获得p[3]的投票。这样在t2就会出现两个领导者，导致后面会出错。

2.Raft 永远不会通过计算副本数目的方式去提交一个之前任期内的日志条目。只有领导人当前任期里的日志条目通过计算副本数目可以被提交;一旦当前任期的日志条目以这种方式被提交,那么由于日志匹配特性,之前的日志条目也都会被间接的提交。

一开始我只要matchIndex[index] 大于一半就会提交，但是在Lab2C就会出现错误，还要加上rf.currentTerm == rf.log[index - 1].Term这个条件才会提交，提交的时候才会将当前索引前面的日志一并提交。

不能再当前任期提交以前任期的条目。只能提交当前任期的条目的时候顺带着把以前的条目提交。